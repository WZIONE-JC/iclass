<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <LINK rel="Bookmark" href="/favicon.ico" >
    <LINK rel="Shortcut Icon" href="/favicon.ico" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="lib/html5.js"></script>
    <script type="text/javascript" src="lib/respond.min.js"></script>
    <script type="text/javascript" src="lib/PIE_IE678.js"></script>
    <![endif]-->
    <link href="assets/css/H-ui.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/H-ui.admin.css" rel="stylesheet" type="text/css" />
    <link href="skin/default/skin.css" rel="stylesheet" type="text/css" id="skin" />
    <link href="lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css" />
    <!--[if IE 6]>
    <script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <link href="assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="lib/sweetalert-1.1.1/sweetalert.css" rel="stylesheet" type="text/css" />
    <title>开设课堂</title>
</head>
<body>
<div class="pd-20">
    <form action="" method="post" class="form form-horizontal" id="form-class-course-add">

        <div class="row cl">
            <label class="form-label col-4"><span class="c-red">*</span>选择课程：</label>
            <div class="formControls col-7">
                    <span class="select-box">
                        <select name="coursecode" id="courseCode" class="select"  datatype="*" nullmsg="请选择课程">
                            <option value="">选择课程</option>

                        </select>
                    </span>
            </div>
        </div>

        <div class="row cl">
            <label class="form-label col-4"><span class="c-red">*</span>选择班级：</label>
            <div class="formControls col-7">
                <span class="select-box">
                        <select name="classcode" id="classCode" class="select"  datatype="*" nullmsg="请选择班级">
                            <option value="">选择班级</option>

                        </select>
                    </span>
            </div>
        </div>

        <div class="row cl">
            <label class="form-label col-4"><span class="c-red">*</span>上课时间：</label>
            <div class="formControls col-7">
                <span class="select-box double-select">
                        <select name="attendnumber" id="attendnumber" class="select"  datatype="*" nullmsg="请选择时间">
                            <option value="">选择哪一节课</option>
                            <option value="1">第1,2节</option>
                            <option value="2">第3,4节</option>
                            <option value="3">第5,6节</option>
                            <option value="4">第7,8节</option>
                        </select>
                    </span>
                <span class="select-box double-select">
                        <select name="attendtime" id="attendtime" class="select"  datatype="*" nullmsg="请选择时间">
                            <option value="">选择周几上课</option>
                            <option value="1">周一</option>
                            <option value="2">周二</option>
                            <option value="3">周三</option>
                            <option value="4">周四</option>
                            <option value="5">周五</option>
                        </select>
                    </span>
            </div>
        </div>

        <div class="row cl">
            <label class="form-label col-4"><span class="c-red">*</span>开始时间：</label>
            <div class="formControls col-7">
                <input type="text" datatype="*" nullmsg="请选择开始时间"
                       onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',skin:'twoer',maxDate: '%y-%M-%d'})"
                       class="input-text Wdate" id="datemin" name="createtime">
            </div>
        </div>

        <div class="row cl">
                <label class="form-label col-4"><span class="c-red">*</span>结束日期：</label>
            <div class="formControls col-7">
                <input type="text" datatype="*" nullmsg="请选择结束时间"
                       onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',skin:'twoer',minDate:'#F{$dp.$D(\'datemin\')}'})"
                       id="deadline" class="input-text Wdate" name="deadline">
            </div>
        </div>

        <div class="row cl">

            <label class="form-label col-4"><span
                    class="c-red">*</span>创建者：</label>
            <div class="formControls col-7">
                <input type="text" class="input-text" value="" readonly="readonly" id="classcreator" name="classcreator" ></div>
        </div>

        <div class="row cl">
            <div class="col-7 col-offset-5">
                <button onClick="" class="btn btn-primary radius" type="submit"><i
                        class="Hui-iconfont">&#xe632;</i> 保存
                </button>

                <button id="cancelButton" onClick="layer_close();" class="btn btn-default radius" type="reset">
                    &nbsp;&nbsp;取消&nbsp;&nbsp;</button>
            </div>

        </div>

    </form>
</div>
</div>
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/1.9.3/layer.js"></script>
<script type="text/javascript" src="lib/My97DatePicker/WdatePicker.js"></script>
<script type="text/javascript" src="lib/icheck/jquery.icheck.min.js"></script>
<script type="text/javascript" src="lib/Validform/5.3.2/Validform.min.js"></script>
<script type="text/javascript" src="assets/js/H-ui.js"></script>
<script type="text/javascript" src="assets/js/H-ui.admin.js"></script>
<script type="text/javascript" src="lib/sweetalert-1.1.1/sweetalert.min.js"></script>
<script type="text/javascript" src="assets/js/business/ip.js"></script>
<script type="text/javascript" src="assets/js/business/class.js"></script>
<script type="text/javascript" src="assets/js/business/course.js"></script>
<script type="text/javascript" src="assets/js/business/class-course.js"></script>
<script type="text/javascript">
    $(function () {
        getCourseByTeacherCode(); //course.js
        var teacherCode = $(window.parent.document).find('#classcreator')[0].value;
        $("#classcreator").val(teacherCode);
    });

    // 监听课程选择事件
    $(function () {
        $("#courseCode").on("change", function () {
            var courseCode = $("#courseCode").val();
            if(courseCode != null && courseCode != "") {
                //先清空Options
                $("#classCode")[0].length = 0;
                getUnrelatedClassByCourseCode(courseCode);
            } else {
                swal({
                    title: "Sorry!",
                    text: "请先选择课程信息",
                    timer: 2000,
                    type: "error"
                });
            }
        })
    });

    $("#form-class-course-add").Validform({
        tiptype:2,
        beforeSubmit:function(form){
            addClassCourse();
            return false;
        }
    });

</script>
</body>
</html>